<<<<<<< HEAD
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Kanban</title>
    <link rel="stylesheet" href="/Sesi-Provas-1Tri-main/quadro kanban/css/style.css">
    <link rel="stylesheet" href="/Sesi-Provas-1Tri-main/quadro kanban/css/style.css">
    <style>
      .tarefa {
          border: 1px solid #ccc;
          margin-bottom: 5px;
          padding: 5px;
          background-color: #f9f9f9;
          cursor: grab;
      }
  </style>
</head>

<body>
  <div id="container1" style="display: block;">
      <h1>Create and Save File</h1>
      <input type="text" id="titleInput" placeholder="Enter Kanban Title" />
      <button onclick="document.getElementById('container2').style.display='block'; document.getElementById('container1').style.display='none'">Criar Kanban</button>
      <button><a href="MeusKanban.html">Cancelar</a></button>
  </div>
  <div id="container2" style="display: none;">
    <nav class="NomeKanban">
        <h3>Quadro Kanban</h3>
    </nav>

    <div class="quadro-kanban">
      <div class="coluna-kanban fazer">
          <div class="coluna-cabecalho">Por Fazer</div>
          <div class="tarefas" id="fazer-tarefas" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
          <button class="btn-adicionar-tarefas" data-column="fazer">+ Adicionar Tarefa</button>
      </div>
      <div class="coluna-kanban em-progresso">
          <div class="coluna-cabecalho">Em Progresso</div>
          <div class="tarefas" id="emprogresso-tarefas" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
          <button class="btn-adicionar-tarefas" data-column="emprogresso">+ Adicionar Tarefa</button>
      </div>
      <div class="coluna-kanban concluido">
          <div class="coluna-cabecalho">Concluído</div>
          <div class="tarefas" id="concluido-tarefas" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
          <button class="btn-adicionar-tarefas" data-column="concluido">+ Adicionar Tarefa</button>
      </div>
  </div>

  

  <!-- Modal para adicionar/editar tarefa -->
  <div class="modal" id="modal-tarefa" style="display:none;">
      <div class="modal-content">
          <h3 id="titulo-modal">Adicionar Tarefa</h3>
          <input type="text" id="titulo-tarefa" placeholder="Título da Tarefa" required>
          <textarea id="descricao-tarefa" placeholder="Descrição da Tarefa"></textarea>
          <button id="btn-salvar-tarefa">Salvar Tarefa</button>
          <button onclick="document.getElementById('modal-tarefa').style.display='none'">Cancelar</button>
      </div>
  </div>
      <script>
          let tarefas = JSON.parse(localStorage.getItem('tarefas-kaban')) || { fazer: [], emprogresso: [], concluido: [] };

function renderizarTarefas() {
    Object.keys(tarefas).forEach(coluna => {
        const colunaElement = document.getElementById(`${coluna}-tarefas`);
        colunaElement.innerHTML = ''; // Limpa a coluna antes de adicionar tarefas
        tarefas[coluna].forEach(tarefa => {
            if (tarefa !== null) { // Add this null check
                const tarefaElement = document.createElement('div');
                tarefaElement.classList.add('tarefa');
                tarefaElement.draggable = true
                tarefaElement.ondragstart = () => drag(event, tarefaElement);
                tarefaElement.ondrop = drop;
                tarefaElement.ondragover = allowDrop;
                tarefaElement.innerHTML = `<div class="tarefa-titulo">${tarefa.titulo}</div>
                                           <div class="tarefa-descricao">${tarefa.descricao || ''}</div>`;
                colunaElement.appendChild(tarefaElement);
            }
        });
    });
}

// Add these event handlers
function allowDrop(ev) {
    ev.preventDefault();
}

function drag(ev, element) {
    ev.dataTransfer.setData(".tarefas", element.id);
}

function drop(ev) {
    let data = ev.dataTransfer.getData(".tarefas");
    ev.target.appendChild(document.getElementById(data));
    ev.preventDefault();
}

document.querySelectorAll('.btn-adicionar-tarefas').forEach(button => {
    button.addEventListener('click', function() {
        const coluna = this.getAttribute('data-column');
        document.getElementById('modal-tarefa').style.display = 'block';
        document.getElementById('btn-salvar-tarefa').onclick = function() {
            adicionarTarefa(coluna);
        };
    });
});

function adicionarTarefa(coluna) {
    const titulo = document.getElementById('titulo-tarefa').value;
    const descricao = document.getElementById('descricao-tarefa').value;
    const novaTarefa = { titulo, descricao };
    tarefas[coluna].push(novaTarefa);
    localStorage.setItem('tarefas-kaban', JSON.stringify(tarefas));
    document.getElementById('modal-tarefa').style.display = 'none';
    renderizarTarefas();
}

renderizarTarefas();

      </script>
</body>
</html>
